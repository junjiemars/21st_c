#!/bin/bash

LC_ALL=C
export LC_ALL

. auto/options
. auto/init
. auto/sources


test -d "$CL_OBJS" || mkdir -p $CL_OBJS

echo > $CL_AUTO_HEADERS_H
echo > $CL_AUTOCONF_ERR


echo "#define CL_CONFIGURE \"$CL_CONFIGURE\"" > $CL_AUTO_CONFIG_H

if test -z "$CL_PLATFORM"; then
  echo "checking for OS"
  
  CL_SYSTEM=`uname -s 2>/dev/null`
  CL_RELEASE=`uname -r 2>/dev/null`
  CL_MACHINE=`uname -m 2>/dev/null`
  
  echo " + $CL_SYSTEM $CL_RELEASE $CL_MACHINE"
  
	case $CL_SYSTEM in
		MSYS_NT-*)
			CL_SYSTEM=${CL_SYSTEM:0:7}
		;;
	esac
		
  CL_PLATFORM="$CL_SYSTEM:$CL_RELEASE:$CL_MACHINE";
  
else
  echo "building for $CL_PLATFORM"
  CL_SYSTEM=$CL_PLATFORM
fi



. auto/cc/conf

. auto/os/conf


case ".$CL_PREFIX" in
	.)
    CL_PREFIX=${CL_PREFIX:-/opt/run}
    have=CL_PREFIX value="\"$CL_PREFIX/\"" . auto/define
	;;

	.!)
    CL_PREFIX=
	;;

	*)
    have=CL_PREFIX value="\"$CL_PREFIX/\"" . auto/define
	;;
esac


. auto/make

. auto/install


. auto/summary
