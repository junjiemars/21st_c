case ${NM_MACHINE} in
	x86_64)
		_cpu_="amd64"
		;;
esac

[ -z "$JC" ] && flag=JC value=javac . ${NM_HOME}auto/cflags
[ -z "$JH" ] && flag=JH value=javah . ${NM_HOME}auto/cflags
[ -z "$JAVA" ] && flag=JAVA value=java . ${NM_HOME}auto/cflags

nt_to_posix_path() {
  echo "\\$1" | \
    sed -e 's#^\\\([a-zA-Z]\):\\#\\\l\1\\#' | \
    sed -e 's#\\#\/#g' 
}


case ${NM_SYSTEM} in
	Darwin)
		flag=jni_lflags value="-I$JAVA_HOME/include -I$JAVA_HOME/include/darwin" \
		. ${NM_HOME}auto/cflags

		flag=jni_ldflags value="-L$JAVA_HOME/jre/lib/server -ljvm $LDLIBS" \
		. ${NM_HOME}auto/cflags
		;;
	Linux)
		flag=jni_lflags value="-I$JAVA_HOME/include -I$JAVA_HOME/include/linux" \
		. ${NM_HOME}auto/cflags
		
		flag=jni_ldflags value="-L$JAVA_HOME/jre/lib/${_cpu_}/server -ljvm $LDLIBS" \
		. ${NM_HOME}auto/cflags
		;;
	MSYS_NT)
		JAVA_HOME=`nt_to_posix_path "$JAVA_HOME"`
		flag=jni_lflags value="-I\"$JAVA_HOME/include\" -I\"$JAVA_HOME/include/win32\"" \
		. ${NM_HOME}auto/cflags
		;;
esac

